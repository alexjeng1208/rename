# 更新日誌

## v2.0.0 (最新版本)

### ✨ 新功能

#### 用戶體驗增強
- **鍵盤快捷鍵支援**
  - `Ctrl+O` - 選擇檔案
  - `Ctrl+D` - 選擇資料夾
  - `Delete` - 刪除選中項目
  - `Ctrl+F` - 聚焦到搜尋框
  - `Ctrl+Z` - 撤銷重命名
  - `Ctrl+R` - 預覽重新命名
  - `Ctrl+Enter` - 執行重新命名
  - `Ctrl+T` - 切換深色模式

- **設定檔記憶功能**
  - 自動記住最後使用的命名規則設定
  - 記住角色編號、類型、索引等參數
  - 記住視窗大小和位置
  - 記住最大檔案數限制
  - 記住深色模式偏好

- **撤銷重命名功能**
  - 支援撤銷最後一次重命名操作
  - 記錄重命名歷史（最多1000筆）
  - 支援查看和還原歷史記錄

- **檔案搜尋過濾功能**
  - 實時過濾檔案列表
  - 顯示過濾結果數量
  - 支援快捷鍵聚焦

- **進度條和視覺回饋**
  - 執行重命名時顯示進度條
  - 顯示處理進度
  - 工具提示（Tooltip）功能

- **深色模式支援**
  - 支援淺色/深色主題切換
  - 自動保存偏好設定

#### 功能增強
- **限制選擇數量功能**
  - 可設定最大選擇數量（0=無限制）
  - 超過限制時會顯示警告

- **資料夾路徑導入**
  - 支援直接輸入資料夾路徑並導入
  - 支援拖放資料夾到視窗

- **僅處理選中項功能**
  - 可選擇僅處理選中的檔案
  - 多選時按順序自動排序命名

### 🔒 安全增強

- **路徑驗證**
  - 防止路徑遍歷攻擊
  - 驗證路徑長度和合法性
  - 拒絕UNC路徑和非法字符

- **文件名驗證**
  - Character格式精確驗證
  - 遊戲引擎標準驗證
  - 自動清理非法字符

- **資源管理**
  - 圖片資源自動釋放
  - 防止內存泄漏
  - 優化資源使用

- **輸入驗證**
  - 所有用戶輸入都經過驗證
  - 範圍限制（角色編號1-99，索引1-20，顏色0-6）
  - 異常處理和錯誤恢復

### 🔧 改進

- **程式碼重構**
  - 模組化設計（`config.py`, `utils.py`, `ui_theme.py`, `security_utils.py`, `filename_validator.py`）
  - 代碼結構優化
  - 錯誤處理改進

- **UI改進**
  - 索引改為固定選項（下拉選單）
  - 選項改變時自動刷新預覽
  - 現代化UI設計

- **打包優化**
  - 更新打包配置，包含所有新模組
  - 優化EXE文件大小
  - 改進錯誤處理（EXE模式下不輸出調試信息）

### 🧪 測試

- **壓力測試**
  - 創建 `stress_test.py` - 15個測試場景
  - 測試極長文件名、特殊字符、路徑遍歷等

- **用戶錯誤模擬**
  - 創建 `user_error_simulation.py` - 20個錯誤場景
  - 模擬非程式人員的常見錯誤操作

- **測試結果**
  - 所有測試場景已通過驗證
  - 所有安全漏洞已修復
  - 所有功能正常工作

### 📝 文檔

- 更新所有MD文件說明
- 添加安全審計報告
- 添加測試總結報告
- 完善使用說明

## v1.0.0

### 初始版本

- 基本檔案重新命名功能
- 支援兩種命名規則（Character規則、夢想命名規則）
- 拖放功能
- 圖片/影片預覽功能
- 批量選擇檔案
- 調整順序功能
- 錯誤處理（檔案衝突處理）

